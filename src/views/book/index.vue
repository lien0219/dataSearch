<template>
  <div class="book_ready">
    <div class="left_con">
      <div class="book_info___2huVt">
        <div class="book_avatar___9SJAA">
          <img
            src="https://www.sklib.cn/booklib/zpimage.zhtml?ID=7930431&amp;SiteID=122&amp;draft=0&amp;type=logo"
          />
        </div>
        <div class="info_right_wrapper">
          <div>
            <div class="title">中国现代建筑100年</div>
            <div class="href_a"><a>胡应麟 著</a></div>
            <div class="info_item___22Z6p">
              <div>
                <span>ISBN：</span>
                <span>978-7-5227-0633-7</span>
              </div>
              <div>
                <span>出版日期：</span>
                <span>2022-10</span>
              </div>
              <div>
                <span>页码：</span>
                <span>434</span>
              </div>
              <div>
                <span>字数：</span>
                <span>434</span>
              </div>
            </div>
            <div class="info_item___22Z6p">
              <div>
                <span>丛书名：</span>
                <span>《中国现代建筑100年》</span>
              </div>
              <div>
                <span>点击量：</span>
                <span>434</span>
              </div>
            </div>
            <div class="info_item___22Z6p">
              <div>
                <span>中图法分类：</span>
                <span>现代建筑、古代建筑</span>
              </div>
            </div>
            <div class="info_item___22Z6p">
              <div><span>关键词：</span></div>
              <span class="ant-tag ant-tag-processing">
                <span role="img" aria-label="plus" class="anticon anticon-plus">
                  <el-icon style="vertical-align: middle">
                    <Plus />
                  </el-icon>
                </span>
                建筑学
              </span>
              <span class="ant-tag ant-tag-processing">
                <span role="img" aria-label="plus" class="anticon anticon-plus">
                  <el-icon style="vertical-align: middle">
                    <Plus />
                  </el-icon>
                </span>
                材料学
              </span>
              <span class="ant-tag ant-tag-processing">
                <span role="img" aria-label="plus" class="anticon anticon-plus">
                  <el-icon style="vertical-align: middle">
                    <Plus />
                  </el-icon>
                </span>
                工程
              </span>
            </div>
          </div>
          <div class="operate_item_wrapper___sjgwW">
            <div>
              <button
                type="button"
                class="ant-btn ant-btn-ghost collect_btn___fMSH_"
              >
                <span role="img" aria-label="star" class="anticon anticon-star">
                  <svg
                    viewBox="64 64 896 896"
                    focusable="false"
                    data-icon="star"
                    width="1em"
                    height="1em"
                    fill="currentColor"
                    aria-hidden="true"
                  >
                    <path
                      d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"
                    ></path>
                  </svg>
                </span>
                <span>收藏</span>
              </button>
              <a>
                <button
                  type="button"
                  class="ant-btn ant-btn-primary collect_btn___fMSH_"
                >
                  <span
                    role="img"
                    aria-label="read"
                    class="anticon anticon-read"
                  >
                    <svg
                      viewBox="64 64 896 896"
                      focusable="false"
                      data-icon="read"
                      width="1em"
                      height="1em"
                      fill="currentColor"
                      aria-hidden="true"
                    >
                      <path
                        d="M928 161H699.2c-49.1 0-97.1 14.1-138.4 40.7L512 233l-48.8-31.3A255.2 255.2 0 00324.8 161H96c-17.7 0-32 14.3-32 32v568c0 17.7 14.3 32 32 32h228.8c49.1 0 97.1 14.1 138.4 40.7l44.4 28.6c1.3.8 2.8 1.3 4.3 1.3s3-.4 4.3-1.3l44.4-28.6C602 807.1 650.1 793 699.2 793H928c17.7 0 32-14.3 32-32V193c0-17.7-14.3-32-32-32zM324.8 721H136V233h188.8c35.4 0 69.8 10.1 99.5 29.2l48.8 31.3 6.9 4.5v462c-47.6-25.6-100.8-39-155.2-39zm563.2 0H699.2c-54.4 0-107.6 13.4-155.2 39V298l6.9-4.5 48.8-31.3c29.7-19.1 64.1-29.2 99.5-29.2H888v488zM396.9 361H211.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c.1-4.1-3.1-7.5-7-7.5zm223.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c0-4.1-3.2-7.5-7.1-7.5H627.1c-3.9 0-7.1 3.4-7.1 7.5zM396.9 501H211.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c.1-4.1-3.1-7.5-7-7.5zm416 0H627.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c.1-4.1-3.1-7.5-7-7.5z"
                      ></path>
                    </svg>
                  </span>
                  <span @click="readerChange">阅读</span>
                </button>
              </a>
            </div>
          </div>
        </div>
      </div>
      <div class="intro_wrapper___2YMyn">
        <div
          class="ant-divider ant-divider-horizontal ant-divider-with-text ant-divider-with-text-left"
          role="separator"
        >
          <span class="ant-divider-inner-text">图书简介</span>
        </div>
        <div class="ant-typography ant-typography-ellipsis">
          <div class="text-container">
            <div class="text" :class="{ expanded: expanded }">
              <div v-if="!expanded">
                <div class="text-content">
                  {{ truncatedContent }}
                </div>
                <div class="toggle-button-container">
                  <button class="toggle-button" @click="toggleExpanded">
                    展开
                  </button>
                </div>
              </div>
              <div v-else>
                {{ content }}
                <button class="toggle-button" @click="toggleExpanded">
                  收起
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="intro_wrapper___2YMyn">
        <div
          class="ant-divider ant-divider-horizontal ant-divider-with-text ant-divider-with-text-left"
          role="separator"
        >
          <span class="ant-divider-inner-text">图书目录</span>
        </div>
        <div class="ant-list ant-list-split ant-list-bordered">
          <div class="ant-spin-nested-loading">
            <div class="ant-spin-container">
              <ul class="ant-list-items">
                <li class="ant-list-item">第一章</li>
                <li class="ant-list-item">第二章</li>
                <li class="ant-list-item">第三章</li>
                <li class="ant-list-item">第四章</li>
                <li class="ant-list-item">第五章</li>
                <li class="ant-list-item">第六章</li>
                <li class="ant-list-item">第七章</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="right_con">
      <BookRight></BookRight>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue'
import { useRouter } from 'vue-router'
import BookRight from '@/views/book/bookRight/index.vue'

let $router = useRouter()
const content = ref(
  '《中国现代建筑100年》是1999年中国计划出版社出版的图书，中国建筑为世界建筑史中其一大分类，依地区来区分大致包含中国、日、韩、中南半岛被称为东方系，西方系则以欧美称之，另有回教、蘇联其他系统。在一些英文文献中，常用小写字母开头的modern architecture表示广义的现代建筑，以大写字母开头的Modern Architecture或Modernism表示狭义的现代建筑。在本卷中用“现代建筑”表示广义的，而用“现代主义建筑”或“现代派建筑”表示狭义的。在20世纪初期，现代建筑曾经被称为新建筑(newarchitecture)',
)
// const maxLines = 2;
const expanded = ref(false)

const toggleExpanded = () => {
  expanded.value = !expanded.value
}

const truncatedContent = computed(() => {
  if (content.value.length <= 150) {
    return content.value
  } else {
    return content.value.slice(0, 150) + '...'
  }
})

const readerChange = () => {
  $router.push('/reader')
}
</script>

<style scoped lang="scss">
.book_ready {
  width: 100%;
  padding: 24px;
  margin-top: 60px;
  min-height: 100vh;
  display: flex;
  .left_con {
    display: flex;
    flex-direction: column;
    flex: 1;
    .book_info___2huVt {
      display: flex;
      .book_avatar___9SJAA {
        margin-right: 24px;
        img {
          width: 200px;
        }
      }
      .info_right_wrapper {
        display: flex;
        flex-direction: column;
        .title {
          font-size: 20px;
          font-weight: 500;
          color: #131520;
          margin-bottom: 20px;
        }
        .href_a {
          a {
            color: #aa381e;
            text-decoration: none;
            background-color: transparent;
            outline: none;
            cursor: pointer;
            transition: color 0.3s;
            -webkit-text-decoration-skip: objects;
            font-size: 12px;
          }
        }
        .info_item___22Z6p {
          display: flex;
          margin-top: 5px;
          div {
            margin-right: 12px;
            line-height: 30px;
          }
          div span:nth-child(1) {
            color: rgba(0, 0, 0, 0.45);
            font-size: 12px;
          }
          div span:nth-child(2) {
            color: #0f0f0f;
            font-size: 12px;
          }
          .ant-tag-processing {
            line-height: 30px;
            margin-right: 10px;
            padding-left: 10px;
            padding-right: 10px;
            padding-top: 3px;
            border: 1px solid #aa381e;
            font-size: 10px;
            color: #aa381e;
            background: #ebe1dd;
            border-color: #d19e8a;
            white-space: nowrap;
            svg {
              margin-top: -5px;
              color: #aa381e;
            }
          }
        }
        .operate_item_wrapper___sjgwW {
          flex: 1 1;
          display: flex;
          flex-direction: column;
          justify-content: flex-end;
          .ant-btn {
            // width: 90px;
            line-height: 25px;
            margin-right: 24px;
            outline: 0;
            position: relative;
            display: inline-block;
            font-weight: 400;
            white-space: nowrap;
            text-align: center;
            background-image: none;
            box-shadow: 0 2px 0 rgba(0, 0, 0, 0.015);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            touch-action: manipulation;
            // height: 32px;
            padding: 4px 15px;
            font-size: 14px;
            border-radius: 2px;
            color: rgba(0, 0, 0, 0.85);
            border: 1px solid #d9d9d9;
            background: #fff;
            span {
              display: inline-block;
            }
          }
          .ant-btn span:nth-child(2) {
            margin-left: 8px;
          }
          .ant-btn span:nth-child(1) {
            margin-top: -4px;
          }
          .ant-btn-primary {
            color: #fff;
            border-color: #aa381e;
            background: #aa381e;
            text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.12);
            box-shadow: 0 2px 0 rgba(0, 0, 0, 0.045);
          }
          .ant-btn-primary:focus,
          .ant-btn-primary:hover {
            color: #fff;
            border-color: #b8593e;
            background: #b8593e;
          }
          .ant-btn-ghost:hover {
            color: #b8593e;
            border-color: #b8593e;
            background: transparent;
          }
          .collect_btn___fMSH_ {
            display: inline-flex;
            align-items: center;
            .anticon {
              font-size: 16px;
              height: 16px;
              transition: margin-left 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);
              color: inherit;
              font-style: normal;
            }
          }
          .ant-btn-ghost {
            color: rgba(0, 0, 0, 0.85);
            border-color: #d9d9d9;
            background: transparent;
          }
        }
      }
    }
    .intro_wrapper___2YMyn {
      padding: 12px 24px;
      margin-top: 24px;
      background-color: #f9f9f8;
      text-indent: 1em;
      .ant-divider-horizontal.ant-divider-with-text {
        display: flex;
        align-items: center;
        margin: 16px 0;
        color: rgba(0, 0, 0, 0.85);
        font-weight: 500;
        font-size: 22px;
        white-space: nowrap;
        text-align: center;
        border-top: 0;
        border-top-color: rgba(0, 0, 0, 0.06);
        clear: both;
        width: 100%;
        min-width: 100%;
        word-break: break-word;
      }
      .ant-divider-horizontal.ant-divider-with-text:before {
        position: relative;
        width: 2%;
        border-top: 1px solid transparent;
        border-top-color: inherit;
        border-bottom: 0;
        transform: translateY(50%);
        content: '';
      }
      .ant-divider-horizontal.ant-divider-with-text-left:after {
        width: 98%;
        position: relative;
        border-top: 1px solid transparent;
        border-top-color: inherit;
        border-bottom: 0;
        transform: translateY(50%);
        content: '';
      }
      .ant-typography-ellipsis {
        font-size: 18px;
      }
      .ant-list-bordered {
        border: 1px solid #d9d9d9;
        border-radius: 2px;
        .ant-spin-nested-loading {
          position: relative;
          .ant-spin-container {
            position: relative;
            transition: opacity 0.3s;
            .ant-list-items {
              margin: 0;
              padding: 0;
              list-style: none;
              .ant-list-item {
                padding-right: 24px;
                padding-left: 24px;
                border-bottom: 1px solid #f0f0f0;
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 12px 0;
                color: rgba(0, 0, 0, 0.85);
                list-style: none;
              }
              li {
                display: list-item;
                text-align: -webkit-match-parent;
              }
            }
            ul {
              display: block;
              list-style-type: disc;
              margin-block-start: 1em;
              margin-block-end: 1em;
              margin-inline-start: 0px;
              margin-inline-end: 0px;
              padding-inline-start: 40px;
            }
          }
        }
      }
      .ant-list {
        box-sizing: border-box;
        // margin: 0;
        margin-top: 40px;
        padding: 0;
        color: rgba(0, 0, 0, 0.85);
        font-size: 20px;
        font-variant: tabular-nums;
        line-height: 1.5715;
        list-style: none;
        font-feature-settings: 'tnum', 'tnum';
        position: relative;
      }
    }
  }
  .right_con {
    width: 36%;
    max-width: 400px;
    margin-left: 24px;
    display: flex;
    flex-direction: column;
  }
}
.text-container {
  position: relative;
}

.text {
  position: relative;
  letter-spacing: 1px;
  line-height: 1.5;
  overflow: hidden;
  font-size: 18px;
}

.text-content {
  display: -webkit-box;
  -webkit-line-clamp: 2; /* 限制为2行 */
  -webkit-box-orient: vertical;
  max-height: 2em; /* 控制2行的高度 */
}

.toggle-button-container {
  text-align: right;
}

.toggle-button {
  background: none;
  border: none;
  color: #aa381e;
  cursor: pointer;
  padding: 0;
}
</style>
